!function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(o,r,function(t){return e[t]}.bind(null,r));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=32)}({1:function(e,t,n){"use strict";n.d(t,"g",(function(){return o})),n.d(t,"a",(function(){return r})),n.d(t,"e",(function(){return i})),n.d(t,"d",(function(){return c})),n.d(t,"c",(function(){return u})),n.d(t,"f",(function(){return d})),n.d(t,"b",(function(){return s}));const o="__VOCABIFY_WORD__",r="__VOCABIFY_DEFINITION__",i="__VOCABIFY_SAVED_ITEMS__",c="Choose a word",u="Find a definiton",d="SET_SELECTED_TEXT",s="GET_SELECTED_TEXT"},2:function(e,t,n){"use strict";n.d(t,"p",(function(){return r})),n.d(t,"e",(function(){return i})),n.d(t,"f",(function(){return c})),n.d(t,"k",(function(){return u})),n.d(t,"j",(function(){return d})),n.d(t,"h",(function(){return s})),n.d(t,"i",(function(){return a})),n.d(t,"b",(function(){return f})),n.d(t,"n",(function(){return w})),n.d(t,"o",(function(){return m})),n.d(t,"c",(function(){return p})),n.d(t,"a",(function(){return g})),n.d(t,"g",(function(){return h})),n.d(t,"d",(function(){return x})),n.d(t,"r",(function(){return T})),n.d(t,"q",(function(){return y})),n.d(t,"l",(function(){return _})),n.d(t,"m",(function(){return v}));var o=n(1);function r(e,t){return new Promise((function(n){let o={};o[e]=t,chrome.storage.sync.set(o,(function(){n(t)}))}))}function i(e){return new Promise((function(t){chrome.storage.sync.get([`${e}`],(function(e){t(e)}))}))}function c(e){return e===o.d||e===o.c}function u(e){return e.length>=2}function d(e){return e.length<=400}function s(e){return 0===Object.keys(e).length}function a(e){return 0===e.length}function f({word:e,definition:t,items:n}){let o={word:e,definition:t};return n.concat(o)}function l({type:e,originalText:t,newText:n,items:o}){return o.map((function(o){return o[e]===t&&(o[e]=n),o}))}async function w({key:e,items:t,callback:n}){return await n(e,t)}function m(e,t){e.textContent=t}function p(e){if(!e.length)return!1;return`${e[0].toUpperCase()}${e.substring(1,e.length)}`}function g(e){if(!e.length)return!1;return"."===e.charAt(e.length-1)?e:`${e}.`}function h(e,t){return e.some((function(e){return e.word.toUpperCase()===t.toUpperCase()}))}function x(e,t){switch(e){case"":return[];default:let n=new RegExp(`^${e}`,"i");return function(e){return e.sort((e,t)=>e.word.localeCompare(t.word))}(t.filter(e=>n.test(e.word)))}}async function T({originalText:e,newText:t,dispatcher:n,currentItems:c}){if(h(c,t))n({type:"on-word-edit",state:{success:!1,newText:t}});else{let u;u=void 0!==window.chrome&&void 0!==window.chrome.storage?(u=await i(o.e))[o.e]:window[o.e],c=l({type:"word",originalText:e,newText:p(t),items:c}),u=l({type:"word",originalText:e,newText:p(t),items:u}),void 0!==window.chrome&&void 0!==window.chrome.storage?await r(o.e,u):window[o.e]=u,console.log("---update word: current and total items---"),console.log("updated current items",c),console.log("totalItems",u),n({type:"on-word-edit",state:{items:c,success:!0}})}}async function y({originalText:e,newText:t,dispatcher:n,currentItems:c}){let u;u=void 0!==window.chrome&&void 0!==window.chrome.storage?(u=await i(o.e))[o.e]:window[o.e],c=l({type:"definition",originalText:e,newText:g(p(t)),items:c}),u=l({type:"definition",originalText:e,newText:g(p(t)),items:u}),void 0!==window.chrome&&void 0!==window.chrome.storage?await r(o.e,u):window[o.e]=u,console.log("---update definition: current and total items---"),console.log("updated current items",c),console.log("totalItems",u),n({type:"on-definition-edit",state:{items:c}})}function _(e,t){return t.filter(t=>t.word.toUpperCase()!==e.toUpperCase())}async function v({wordToDelete:e,currentItems:t,dispatcher:n}){let c;c=_(e,c=void 0!==window.chrome&&void 0!==window.chrome.storage?(c=await i(o.e))[o.e]:window[o.e]),t=_(e,t),void 0!==window.chrome&&void 0!==window.chrome.storage?await r(o.e,c):window[o.e]=c,n({type:"on-delete-item-response",state:{delete:!0,wordToDelete:e,currentItems:t}})}},32:function(e,t,n){"use strict";n.r(t);var o=n(1);const r=function(){let e="";return{onNewSelectedText:t=>(t.action===o.f&&(e=t.data),e),onRequestForSelectedText:(t,n)=>(t.action===o.b&&""!==e&&(n({data:e}),e=""),e)}}();var i=n(2);let{onNewSelectedText:c,onRequestForSelectedText:u}=r;chrome.runtime.onConnect.addListener((function(e){e.onMessage.addListener(c)})),chrome.runtime.onMessage.addListener((function(e,t,n){u(e,n)})),chrome.runtime.onInstalled.addListener((function(){chrome.contextMenus.create({title:"Vocabify options",contexts:["selection"],id:"selection"}),chrome.contextMenus.create({title:"Save '%s' as Vocabify word",parentId:"selection",id:o.g,contexts:["selection"]}),chrome.contextMenus.create({title:"Save '%s' as Vocabify definition",parentId:"selection",id:o.a,contexts:["selection"]})})),chrome.contextMenus.onClicked.addListener((async function(e,t){let{pageUrl:n,selectionText:o,menuItemId:r}=e;await Object(i.p)(r,o)}))}});